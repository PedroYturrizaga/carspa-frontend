<mat-card class="matCardMin">      
    <mat-card-header class="sombreadoSubtitulos alinearCabecera">
        <mat-card-title class="subtitulo-seccion">Cerrar Caja</mat-card-title>
        <div class="emp">
          <button mat-button class="mat-button-icon" (click)="close()">
            <div class="example-tooltip-host" matTooltip="Salir">
              <span>
                <i class="material-icons">close</i>
              </span>
            </div>
          </button>
        </div>
      </mat-card-header>
<div class="col-12">
  <div class="row">
      <div class="col-sm-12">
        <mat-card-content>
          <form #FormCierreCaja="ngForm" novalidate name="FormCierreCaja">
            <div class="card-body">
              <div class="row">
                <div class="col-4">
                  <label> <b>  Nombre:</b> {{lsCabecera.descripcionApertura}}</label>
                </div>
                <div class="col-4">
                  <label> <b>Abreviatura:</b>{{lsCabecera.abreviatura}}</label>
                </div>
                <div class="col-4"  *ngIf='lsCabecera.estado=="1"' >
                  <label> <b> Hora de Apertura:</b> {{lsCabecera.fhApertura | date:'hh'}}H
                    {{lsCabecera.fhApertura | date:'mm'}}M {{lsCabecera.fhApertura | date:'ss'}}S</label>
                </div>
                <div class="col-4" *ngIf='lsCabecera.estado=="2"'>
                    <label> <b>Hora de Cierre:</b> {{lsCabecera.fhCierre | date :'hh'}}H 
                        {{lsCabecera.fhCierre | date:'mm'}}M {{lsCabecera.fhCierre | date:'ss'}}S</label>
                </div>
                <div class="col-4">
                  <label><b> Turno:</b>{{lsCabecera.turno}}</label>
                </div>
                <div class="col-4">
                  <label> <b> Horario:  </b>  {{lsCabecera.horario}}</label>
                </div>
                <div class="col-4"  *ngIf='lsCabecera.estado=="1"' >
                  <label> <b> Fecha de Apertura:</b> {{lsCabecera.fhApertura | date:'d/M/y'}}</label>
                  
                </div>
                <div class="col-4"   *ngIf='lsCabecera.estado=="2"'> 
                    <label> <b> Fecha de Cierre:</b>  {{lsCabecera.fhCierre | date:'d/M/y'}}</label>
                </div>
              </div>
            </div>

            <div class="card-body">
              <h6> <b> Cierre de Caja:     </b></h6>
              <div class="row">
                <div class="col-12">
                  <div class="row">
                    <div class="col-4">
                      <div class="row">
                        <div class="col-12">
                          <mat-form-field class="example-full-width">
                            <mat-label for="montoEfectivo">Monto Total Efectivo: S/.</mat-label>
                            <input matInput type="number" name="montoEfectivo" #montoEfectivo="ngModel" id="montoEfectivo"
                              [(ngModel)]="aperturaCaja.montoEfectivo" [disabled]="true" required />
                            <mat-error>
                              <app-validators-messages [controlVar]="montoEfectivo" labelName="Monto Total Efectivo"></app-validators-messages>
                            </mat-error>
                          </mat-form-field>
                        </div>
                        <div class="col-12">
                          <mat-form-field class="example-full-width">
                            <mat-label for="montoTarjeta">Monto Total Tarjeta: S/.</mat-label>
                            <input matInput type="number" name="montoTarjeta" #montoTarjeta="ngModel" id="montoTarjeta"
                              [(ngModel)]="aperturaCaja.montoTarjeta" [disabled]="true" required />
                            <mat-error>
                              <app-validators-messages [controlVar]="montoTarjeta" labelName="Monto Total Tarjeta"></app-validators-messages>
                            </mat-error>
                          </mat-form-field>
                        </div>
                        <div class="col-12">
                          <mat-form-field class="example-full-width">
                            <mat-label for="montoCierre">Monto Final: S/.</mat-label>
                            <input matInput type="number" name="montoCierre" #montoCierre="ngModel" id="montoCierre"
                              [(ngModel)]="aperturaCaja.montoCierre" [disabled]="true" required />
                            <mat-error>
                              <app-validators-messages [controlVar]="montoCierre" labelName="Monto Final"></app-validators-messages>
                            </mat-error>
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="row">
                        <div class="col-12">
                          <mat-form-field class="example-full-width">
                            <mat-label for="saldoEfectivo">Monto Real Efectivo: S/.</mat-label>
                            <input matInput type="number" name="saldoEfectivo" #saldoEfectivo="ngModel" id="saldoEfectivo"
                              [(ngModel)]="aperturaCaja.saldoEfectivo" required
                              (input)="calcularFaltanteEfectivo()" />
                            <mat-error>
                              <app-validators-messages [controlVar]="saldoEfectivo" labelName="Monto Real Efectivo"></app-validators-messages>
                            </mat-error>
                          </mat-form-field>
                        </div>
                        <div class="col-12">
                          <mat-form-field class="example-full-width">
                            <mat-label for="saldoTarjeta">Monto Real Tarjeta: S/.</mat-label>
                            <input matInput type="number" name="saldoTarjeta" #saldoTarjeta="ngModel" id="saldoTarjeta"
                              [(ngModel)]="aperturaCaja.saldoTarjeta" required
                              (input)="calcularFaltanteTarjeta()" />
                            <mat-error>
                              <app-validators-messages [controlVar]="saldoTarjeta" labelName="Monto Real Tarjeta"></app-validators-messages>
                            </mat-error>
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="row">
                        <div class="col-12">
                          <mat-form-field class="example-full-width">
                            <mat-label for="faltanteEfectivo">Monto Faltante Efectivo: S/.</mat-label>
                            <input matInput type="number" name="faltanteEfectivo" #faltanteEfectivo="ngModel" id="faltanteEfectivo"
                              [(ngModel)]="aperturaCaja.faltanteEfectivo" [disabled]="true" required />
                            <mat-error>
                              <app-validators-messages [controlVar]="faltanteEfectivo" labelName="Monto Faltante Efectivo"></app-validators-messages>
                            </mat-error>
                          </mat-form-field>
                        </div>
                        <div class="col-12">
                          <mat-form-field class="example-full-width">
                            <mat-label for="faltanteTarjeta">Monto Faltante Tarjeta: S/.</mat-label>
                            <input matInput type="number" name="faltanteTarjeta" #faltanteTarjeta="ngModel" id="faltanteTarjeta"
                              [(ngModel)]="aperturaCaja.faltanteTarjeta" [disabled]="true" required />
                            <mat-error>
                              <app-validators-messages [controlVar]="faltanteTarjeta" labelName="Monto Faltante Tarjeta"></app-validators-messages>
                            </mat-error>
                          </mat-form-field>
                        </div>
                        <div class="col-12">
                          <mat-form-field class="example-full-width">
                            <mat-label for="saldoFaltante">Faltante Total: S/.</mat-label>
                            <input matInput type="number" name="saldoFaltante" #saldoFaltante="ngModel" id="saldoFaltante"
                              [(ngModel)]="aperturaCaja.saldoFaltante" [disabled]="true" required />
                            <mat-error>
                              <app-validators-messages [controlVar]="saldoFaltante" labelName="Faltante"></app-validators-messages>
                            </mat-error>
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-12">
                  <mat-form-field class="example-full-width">
                    <mat-label for="observacion">Observaci√≥n:</mat-label>
                    <textarea matInput name="observacion" matTextareaAutosize matAutosizeMinRows="2" matAutosizeMaxRows="5"
                      #observacion="ngModel" id="observacion" [(ngModel)]="aperturaCaja.observacion"></textarea>

                  </mat-form-field>
                </div>
              </div>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-12 text-right botonesArriba">
                
                    <div *ngIf='lsCabecera.estado=="1"' >
                        <button mat-raised-button  (click)="actualizarCerrarCaja() && obtenerAperturaCajas()" [disabled]="FormCierreCaja.invalid">Cerrar Caja</button>
                   
                      </div>
                      <div  *ngIf='lsCabecera.estado=="2"' >
                          <button mat-raised-button  (click)="confirmarCierreCaja() && obtenerAperturaCajas()"[disabled]="FormCierreCaja.invalid">Cerrado</button>
                     
                        </div>

                    <div>
                      <button mat-raised-button (click)="close()">Cancelar</button>
                    </div>
                  
                </div>
              </div>
            </div>
          </form>
  
        </mat-card-content>
      </div>
  </div>
</div>
</mat-card>